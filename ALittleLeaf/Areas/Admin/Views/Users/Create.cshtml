@model ALittleLeaf.ViewModels.RegisterViewModel

@{
    Layout = "_LayoutAdmin";
    ViewData["Title"] = "Thêm người dùng mới";
}
<!-- Content Wrapper -->
<div class="content-wrapper">
    <!-- Content Header -->
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1>Thêm người dùng mới</h1>
                </div>
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a asp-area="Admin" asp-controller="Dashboard" asp-action="Index">Trang chủ</a></li>
                        <li class="breadcrumb-item"><a asp-area="Admin" asp-controller="Users" asp-action="Index">Người dùng</a></li>
                        <li class="breadcrumb-item active">Thêm mới</li>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <!-- Main content -->
    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <!-- Cột chính (Form) -->
                <div class="col-md-8">
                    <!-- AdminLTE Card -->
                    <div class="card card-primary">
                        <div class="card-header">
                            <h3 class="card-title">Thông tin tài khoản</h3>
                        </div>

                        <!-- Form bắt đầu -->
                        <form asp-area="Admin" asp-controller="Users" asp-action="Create" method="post" onsubmit="return checkRegistry()">
                            @Html.AntiForgeryToken()

                            <div class="card-body">
                                <!-- Hiển thị lỗi chung từ Server -->
                                <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                                <!-- Lỗi check Email tồn tại (JS) -->
                                <div class="form-group">
                                    <span class="text-danger font-weight-bold" id="isExist-error" style="display:none;">Email đã tồn tại.</span>
                                </div>

                                <!-- 1. HỌ TÊN -->
                                <div class="form-group">
                                    <label asp-for="UserFullname">Họ và tên <span class="text-danger">*</span></label>
                                    <input asp-for="UserFullname" type="text" class="form-control" id="fullname" placeholder="Nhập họ và tên">
                                    <!-- Span lỗi cho JS -->
                                    <span class="text-danger" id="fullname-error" style="display:none; font-size: 0.9rem;"></span>
                                    <!-- Span lỗi cho Server -->
                                    <span asp-validation-for="UserFullname" class="text-danger"></span>
                                </div>

                                <!-- 2. GIỚI TÍNH -->
                                <div class="form-group">
                                    <label>Giới tính</label>
                                    <div class="d-flex">
                                        <div class="custom-control custom-radio mr-4">
                                            <input class="custom-control-input" type="radio" id="radio1" asp-for="UserSex" value="true" checked>
                                            <label for="radio1" class="custom-control-label">Nữ</label>
                                        </div>
                                        <div class="custom-control custom-radio">
                                            <input class="custom-control-input" type="radio" id="radio2" asp-for="UserSex" value="false">
                                            <label for="radio2" class="custom-control-label">Nam</label>
                                        </div>
                                    </div>
                                </div>

                                <!-- 3. NGÀY SINH -->
                                <div class="form-group">
                                    <label asp-for="UserBirthday">Ngày sinh <span class="text-danger">*</span></label>
                                    <!-- Dùng type="date" để hiện lịch -->
                                    <input asp-for="UserBirthday" type="date" class="form-control" id="birthday" placeholder="mm/dd/yyyy (Ví dụ: 10/25/1999)">
                                    <span class="text-danger" id="birthday-error" style="display:none; font-size: 0.9rem;"></span>
                                    <span asp-validation-for="UserBirthday" class="text-danger"></span>
                                </div>

                                <!-- 4. EMAIL -->
                                <div class="form-group">
                                    <label asp-for="UserEmail">Email <span class="text-danger">*</span></label>
                                    <input asp-for="UserEmail" type="email" class="form-control" id="email" placeholder="example@gmail.com">
                                    <span class="text-danger" id="email-error" style="display:none; font-size: 0.9rem;"></span>
                                    <span asp-validation-for="UserEmail" class="text-danger"></span>
                                </div>

                                <!-- 5. MẬT KHẨU -->
                                <div class="form-group">
                                    <label asp-for="UserPassword">Mật khẩu <span class="text-danger">*</span></label>
                                    <input asp-for="UserPassword" type="password" class="form-control" id="password" placeholder="Mật khẩu">
                                    <span class="text-danger" id="password-error" style="display:none; font-size: 0.9rem;"></span>
                                    <span asp-validation-for="UserPassword" class="text-danger"></span>
                                </div>

                                <!-- 6. ĐỊA CHỈ -->
                                <div class="form-group">
                                    <label asp-for="Address">Địa chỉ <span class="text-danger">*</span></label>
                                    <input asp-for="Address" type="text" class="form-control" id="address" placeholder="Nhập địa chỉ">
                                    <span class="text-danger" id="address-error" style="display:none; font-size: 0.9rem;"></span>
                                    <span asp-validation-for="Address" class="text-danger"></span>
                                </div>

                                <!-- 7. PHÂN QUYỀN (Chỉ Admin mới thấy) -->
                                <div class="form-group">
                                    <label asp-for="UserRole">Loại tài khoản</label>
                                    <select asp-for="UserRole" class="form-control custom-select">
                                        <option value="customer">Khách hàng (Customer)</option>
                                        <option value="admin">Quản trị viên (Admin)</option>
                                    </select>
                                </div>

                            </div>
                            <!-- /.card-body -->

                            <div class="card-footer">
                                <button type="submit" class="btn btn-primary">Tạo người dùng</button>
                                <a asp-action="Index" class="btn btn-default float-right">Hủy bỏ</a>
                            </div>
                        </form>
                    </div>
                    <!-- /.card -->
                </div>

                <!-- Cột phụ (Hướng dẫn - Optional) -->
                <div class="col-md-4">
                    <div class="callout callout-info">
                        <h5>Lưu ý</h5>
                        <p>Mật khẩu phải có ít nhất 8 ký tự, bao gồm chữ hoa, chữ thường, số và ký tự đặc biệt.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

@section Scripts {
    <script src="~/js/validLoginAndRegistry.js"></script>
}