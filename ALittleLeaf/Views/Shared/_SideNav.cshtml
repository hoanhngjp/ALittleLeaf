@using ALittleLeaf.ViewModels
@{
    var cart = ViewData["Cart"] as List<CartItemViewModel> ?? new List<CartItemViewModel>();
}
<div id="site-nav" class="site-nav">
    <div id="site-cart" class="site-nav-container">
        <div class="site-nav-container-last">
            <p class="title">Giỏ hàng</p>
            <div class="cart-view">
                <table id="cart-inside">
                    <tbody>
                        @if (cart.Count == 0)
                        {
                            <tr id="cart-empty-message">
                                <td colspan="2">Hiện chưa có sản phẩm nào</td>
                            </tr>
                        }
                        else
                        {
                            @foreach (var item in cart)
                            {
                                <tr class="item-in-cart" data-product-id="@item.ProductId">
                                    <td class="img">
                                        <a asp-controller="Product" asp-action="Index" asp-route-productId="@item.ProductId" asp-route-idCategory="@item.IdCategory">
                                            <img src="~/img/prdImg/@item.ProductImg" alt="@item.ProductName">
                                        </a>
                                    </td>
                                    <td>
                                        <a asp-controller="Product" asp-action="Index" asp-route-productId="@item.ProductId" asp-route-idCategory="@item.IdCategory" class="pro-title-cart">
                                            @item.ProductName
                                        </a>
                                        <span class="variant"></span>
                                        <span class="pro-quantity-cart">@item.Quantity</span>
                                        <span class="pro-price-cart">@String.Format("{0:N0}₫", item.ProductPrice * item.Quantity)</span>
                                        <span class="remove-in-cart">
                                            <a href="#" class="remove-from-cart-ajax" data-product-id="@item.ProductId">
                                                <ion-icon name="close-outline"></ion-icon>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
                <span class="line"></span>
                <table class="table-total">
                    <tbody>
                        <tr>
                            <td class="text-left" style="font-size: 14px;">TỔNG TIỀN: </td>
                            <td class="text-right cart-total-display" id="total-in-cart" style="font-size: 14px;">
                                @String.Format("{0:N0}₫", (int)(ViewData["CartTotalPrice"] ?? 0))
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <a asp-controller="Cart" asp-action="Index">
                                    <button>XEM GIỎ HÀNG</button>
                                </a>
                            </td>
                            <td>
                                <a asp-controller="Checkout" asp-action="Index">
                                    <button>THANH TOÁN</button>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>
    </div>

    <div id="site-search" class="site-nav-container">
        <div class="site-nav-container-last">
            <p class="title">Tìm kiếm</p>
            <div class="search-box-wrap">
                <form asp-controller="Search" asp-action="Index" method="get" class="searchForm">
                    <div class="search-inner">
                        <input type="search" class="searchInput" id="live-search-input" size="20" name="q" placeholder="Tìm kiếm sản phẩm">
                    </div>
                    <button type="submit" class="btn-search">
                        <ion-icon name="search-outline"></ion-icon>
                    </button>
                </form>
                <div class="result-wrap">
                    <div class="result-content" id="live-search-results">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button id="site-close-handle" class="site-close-handle">
        <span class="close">
            <ion-icon name="close-outline"></ion-icon>
        </span>
    </button>
</div>